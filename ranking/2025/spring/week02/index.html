<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Week 02</title>
</head>
<body>
  <div id="app"></div>

  <script>
    const targetPath = "../../../../assets/html/ranking/weekly/shared-index.html";

    fetch(targetPath)
      .then(res => res.text())
      .then(html => {
        const container = document.createElement("div");
        container.innerHTML = html;
        document.getElementById("app").appendChild(container);

        // script タグを再実行する
        container.querySelectorAll("script").forEach(oldScript => {
          const newScript = document.createElement("script");

          // src属性があればコピー（外部スクリプト）
          if (oldScript.src) {
            newScript.src = oldScript.src;
          } else {
            newScript.textContent = oldScript.textContent;
          }

          // type, async, defer なども引き継ぎ（念のため）
          [...oldScript.attributes].forEach(attr => {
            newScript.setAttribute(attr.name, attr.value);
          });

          document.body.appendChild(newScript);
        });
		
		// 👉 この setTimeout の中で実行することで「確実にDOMが構築された後」に実行できる
setTimeout(() => {
  if (typeof initOverviewSection === "function") {
    initOverviewSection();
  } else {
    console.warn("initOverviewSection is not defined yet");
  }
}, 0);
		
      })
      .catch(err => {
        console.error("Failed to load shared-index.html:", err);
      });
  </script>
</body>
</html>
