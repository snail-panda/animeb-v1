<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Anime Weekly Ranking - Week 7</title>
  <link rel="stylesheet" href="../../../../assets/css/ranking/weekly/style.css">
  <link href="https://fonts.googleapis.com/css2?family=Alfa+Slab+One&family=Special+Gothic+Expanded+One&family=Agency+FB&family=Roboto+Condensed+Medium&family=Special+Gothic&family=Oswald&family=Tuffy&family=Pathway+Gothic+One&family=Barlow+Condensed+Medium&family=Oxygen&family=Squada+One&family=Segoe+UI&family=Bebas+Neue&family=Anton&family=Roboto+Condensed:wght@300;400;500;600;700;800;900&family=Montserrat:wght@300;400;500;600;700;800;900&family=Abel&family=Fira+Sans:wght@300;400;500;600;700;800;900&family=Orbitron&family=Barlow+Condensed:wght@300;400;500;700&family=Barlow+Condensed:ital,wght@0,300&family=Special+Elite&display=swap" rel="stylesheet">
</head>

<body>
  <!-- ポップアップ用のツールチップボックスを追加 -->
<div id="tooltip" class="tooltip"></div>
<div class="nav-bar">
  <div class="nav-link left"><a href="#">← Previous</a></div>
  <div class="nav-link center"><a href="https://snail-panda.github.io/animeb-v1/#">Back to Homepage</a></div>
  <div class="nav-link right"><a href="https://snail-panda.github.io/animeb-v1/ranking/2025/spring/week02/index.html">Next →</a></div>
</div>

<div class="wrapper">
  <div class="header">
    <h1>TOP5</h1>
    <span class="week-title">WEEK 7</span><span class="duration"> (05/18/Sun-5/24/Sat)</span>
  </div>
  <div class="sub-header"><span class="season-title"><span class="year">2025</span> <span class="season season-spring">SPRING</span></span> <span class="title-anime">ANIME</span> <span class="title-ranking">RANKING</span> <span class="ep-range">[Ep.7–8]</span></div>

 <!-- watch status -->
  <div class="watch-status-wrapper">
  <div class="watch-status">

  <!-- ★タイトル行：ただの見出し -->
  <div class="ws-title">VIEWING STATUS<span class="info-trigger" data-key="vstatus"><img class="trigger-icon" src="../../../../images/badges/info-darkgrey2.png" width="8px"></span></div>

  <!-- ★トグル行：アイコン＋数字＋▼ -->
  <button class="ws-toggle" aria-expanded="false">
    <div class="ws-item" data-tooltip="watching">
      <span class="icon-tv"></span>
      <span class="view-count" data-key="watching"></span>
    </div>
    <svg class="ws-caret" viewBox="0 0 10 10"><path d="M1 3l4 4 4-4"/></svg>
  </button>

  <!-- ★展開パネル（残り3項目） -->
  <div class="ws-panel" hidden>
    <div class="ws-item" data-tooltip="droppedThisWeek">
      <span class="icon-drop"></span>
      <span class="view-count" data-key="droppedThisWeek"></span>
    </div>
    <div class="ws-item" data-tooltip="droppedTotal">
      <span class="icon-trash"></span>
      <span class="view-count" data-key="droppedTotal"></span>
    </div>
    <div class="ws-item" data-tooltip="backOnList">
      <span class="icon-back"></span>
      <span class="view-count" data-key="backOnList"></span>
    </div>
    <div class="ws-item" data-tooltip="noAir">
      <span class="icon-noair"></span>
      <span class="view-count" data-key="noAir"></span>
    </div>
    <div class="ws-item" data-tooltip="completed">
      <span class="icon-completed"></span>
      <span class="view-count" data-key="completed"></span>
    </div>
    <div class="ws-item" data-tooltip="total">
      <span class="icon-total"></span>
      <span class="view-count" data-key="total"></span>
    </div>
  </div>
</div>
</div>


<section class="overview-section">
  <button id="overview-toggle-btn">
    <span class="triangle-icon"><svg width="10px" height="10px" viewBox="0 0 17 17" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="si-glyph si-glyph-arrow-thick-thin-down" transform="rotate(0) scale(1, 1)">        <title>741</title>        <defs></defs>    <g stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">        <g transform="translate(1.000000, 4.000000)" fill="#41734e" >            <path d="M1.336,4.667 C1.535,4.667 1.74,4.712 1.932,4.808 L8.002,7.842 L14.071,4.808 C14.73,4.478 15.53,4.746 15.859,5.405 C16.189,6.063 15.921,6.864 15.263,7.193 L8.597,10.526 C8.222,10.714 7.779,10.714 7.404,10.526 L0.738,7.193 C0.08,6.864 -0.188,6.063 0.142,5.405 C0.377,4.937 0.847,4.667 1.336,4.667 L1.336,4.667 Z" class="si-glyph-fill"></path>            <path d="M1.336,0.334 C1.436,0.334 1.537,0.356 1.633,0.404 L8.002,3.588 L14.369,0.404 C14.698,0.24 15.098,0.373 15.264,0.702 C15.428,1.031 15.295,1.431 14.965,1.597 L8.299,4.93 C8.111,5.024 7.891,5.024 7.703,4.93 L1.037,1.597 C0.707,1.432 0.574,1.032 0.738,0.702 C0.855,0.469 1.091,0.334 1.336,0.334 L1.336,0.334 Z" class="si-glyph-fill"></path>        </g>    </g></svg></span> OVERVIEW
  </button>
  <div id="overview-container" class="collapsed"></div>
</section>

<!-- ✅ mount先。ここに選ばれたヘッダーを挿入 -->
<div class="table-header-mount"></div>

<!-- ✅ 通常週用（非表示） -->
<template id="table-header-normal">
  <div class="table table-header">
    <div class="header-rank">RANK (Δ)</div>
    <div class="header-title">TITLE / *WEEKLY RANKING POINT-WRP <span class="info-trigger" data-key="wrp"><img class="trigger-icon" src="../../../../images/badges/info-darkgrey2.png" width="8px"></span> (Bar Scale: 4-11)</div>
    <div class="header-totalscore"><span class="info-trigger" data-key="total">TOTAL SCORE<img class="trigger-icon" src="../../../../images/badges/info-darkgrey2.png" width="8px"></span></span></div>
  </div>
</template>

  <!-- ✅ ファイナル週用（非表示） -->
<template id="table-header-final">
  <div class="table table-header">
    <div class="header-rank">RANK (Δ)</div>
    <div class="header-title">TITLE / *Final WRP<span class="info-trigger" data-key="fwrp"><img class="trigger-icon" src="../../../../images/badges/info-darkgrey2.png" width="8px"></span> (Bar Scale: 40-100)</div>
    <div class="header-totalscore">Overall Rating<span class="info-trigger" data-key="orp"><img class="trigger-icon" src="../../../../images/badges/info-darkgrey2.png" width="8px"></span></div>
  </div>
</template>

  <!-- Entry Template -->
  <div id="entry-template" style="display: none;">
  <div class="entry">
    <div class="rank-wrapper">
      <div class="rank-top">
        <img class="crown-gold" src="https://i.postimg.cc/d336xV81/cupcake.png">
        <div class="rank-number">1</div>
      </div>
      <div class="rank-trend">
        <img class="trend-icon-up" src="https://i.postimg.cc/x1bcfV04/trend-up-arrow01.png">
        <div class="trend-label">UP</div>
      </div>
    </div>

    <div class="title">
      <div class="title-container">
        <!-- ← 既存 .title の中に入れる -->
      <!-- 左: キービジュアル -->
      <!-- キービジュアル -->
        <div class="kv-thumb">
    <img src="https://i.postimg.cc/bJctW9z6/kijingentousho.jpg" alt="Key Visual">
          <div class="title-ep">Ep.7</div>
        </div>
        <!-- 右: 情報ブロック -->
        <div class="info-box">
        <!-- 上段 -->
        <div class="info-top">  
      <!-- 英語タイトル-->Sword of the Demon Hunter
      </div>
            <!-- 中段 -->
      <!-- 日本語タイトル・レビュー  -->
      <div class="jp-title">鬼人幻燈抄
          
          </div>
     <!-- ジャンル + コラップスボタン -->
          <!-- 下段 -->
    <div class="info-bottom">
      <div class="genre-tags">
        <span class="genre-tag">Action</span>
        <span class="genre-tag">Historical</span>
      </div>
      <div class="collapse-wrapper">
      <button class="collapse-btn" aria-expanded="false">MORE INFO▼</button>
      <span class="review-tag" data-review="">Review</span> 
          </div>
      <div class="bar-wrapper">
      <div class="bar">
        <div class="bar-label">Weekly Ranking Point*</div>
        <div class="bar-inner">
          <div class="bar-track">
            <div class="bar-fill">
              <div class="bar-main"></div>
              <div class="bar-overflow"></div>
            </div>
          </div>
          <div class="wrp-score">
            9.4<span class="wrp-score-unit">pt</span>
            <button class="wrp-detail-btn" data-breakdown=""></button>
          </div>
        </div>
      </div>
    </div>
        </div>   
    </div>
      </div>
    </div>
    
    <div class="score"><span class="score-number">9</span><span class="score-unit">pt</span></div>
  
   <!-- ✅ synopsisは.entryの末尾に配置 -->
    <!-- synopsis（タイトル下） -->
  <div class="synopsis" style="grid-area: synopsis">
    <!-- JSで埋まるので空でOK -->
  </div> 
    
   <!-- more-info (entryのタイトルエリア,
synopsisの真下の段) -->
  <div class="more-info" style="grid-area: moreinfo">
    <dl>
      <dt>Release Date</dt><dd>April 10, 2025 to Jun 26, 2025</dd>
      <dt>Romanized Title</dt><dd>Ninja to Koroshiya no Futarigurashi</dd>
      <dt>Based On</dt><dd>Manga</dd>
      <dt>Studios</dt><dd>SHAFT</dd>
      <dt>Creators</dt><dd>Yukihiro Miyamoto</dd>
      <dt>External Scores</dt><dd>7.59 (MAL)</dd>
      <dt>Streaming Services</dt><dd>Crunchyroll, Apple TV+</dd>
    </dl>
  </div>
  </div>
     </div>

	<!-- ✅ Entryを複製して追加する親要素 -->
<div class="entry-list">
  <!-- JSがここに.entryを追加していく -->
</div> <!-- entry-list 終了 -->


 <!-- Note mount point -->
<div class="note-mount"></div>

<!-- ✅ 通常週用 note テンプレート -->
<template id="note-normal">
  <div class="note">
    <strong>*Note 1: General Disclaimer</strong> 
    <p>
    This ranking is absolutely subjective and personal, while striving to remain as objective as possible. There is genuinely no intent to humiliate, belittle, or undermine any creators or their work. The scoring is based on a personal set of criteria, refined over time and shaped by both relative and absolute evaluation. These criteria focus on key elements such as animation, script, structure, direction, pacing, overall appeal, charm, and the degree of satisfaction the work delivers as a complete piece.
    </p>
  <div class="detail-toggle">
    <u>Read more...</u> &#9662;
  </div>
    <div class="detail-content">

	<p class="note-continued">(continued)</p>

<p>While <strong>WRP</strong> attempts to evaluate each episode using consistent criteria, it does not function as a static or absolute metric—let alone its scores are.</p>

<p>Each week’s unique landscape—not just about a show’s own performance, but also lineups of different mixes of genres, strengths, and expectations—means the same numerical score may carry different weight from one week to another.<br>
<em>(e.g., a 9-point episode one week is not necessarily equal to a 9-point episode in another.)</em></p>

<p>The ranking embraces both relative and absolute values, adjusting for genre diversity, production scale, and context-specific charm. In this way, it aims to reflect how each show performs not in isolation, but within its temporal and creative surroundings.</p>

<p>And most importantly, that’s part of what makes weekly rankings dynamic and interesting.</p>
  </div>
  </div>

  <div class="hairline"></div>

  <div class="note">
    
    <p><strong>*Note 2: What's WRP?*</strong></p>
  <p>
  <strong>WRP</strong> stands for <em>Weekly Ranking Point</em>—a scoring system created to represent one's weekly viewing experience of a single anime episode as truthfully and purely as possible. It should never reflect only subjective values or emotional response, but rather structured thought, quiet and objective observation, and consistent standards—balancing personal sensibility with a solid foundation of carefully and passionately developed criteria.
  </p>
  <p>
  Rather than judging a show as a whole, <strong>WRP</strong> focuses on one episode—a single 23-minute weekly experience in the course of a 12-week season. It may appear to be a tiny and fleeting part of the entire series, but it is surely an irreplaceable part of one's viewing experience. <strong>WRP</strong> was born to capture that.
  </p>

  <div class="detail-toggle">
    <u>Read more...</u> &#9662;
  </div>
    <div class="detail-content">

	<p class="note-continued">(continued)</p>

  <p><strong>Structure:</strong></p>
  <p>
    The <strong>WRP</strong> score consists of six foundational elements—not selected based on preference, but because they consistently shape one's viewing experience from week to week:
  </p>
  <ul>
    <li><strong>Base Score</strong></li>
    <li><strong>Visual Quality / Animation</strong></li>
    <li><strong>Writing / Narrative Structure</strong></li>
    <li><strong>Direction / Pacing / Composition</strong></li>
    <li><strong>Charm</strong>– how much this episode brings out the core appeal of the show—its characters, its world, its tone, or its storytelling identity.</li>
    <li><strong>Overall Quality / Execution	& Episode Satisfaction</strong> – the degree of enjoyment, fulfillment, and craftsmanship delivered by the episode as a cohesive, complete experience.</li>
  </ul>

<p>
  <strong>WRP</strong> is, at its core, a mere scoring system. But it's one built with care and purpose—so that even something as simple as evaluating an episode can become a way of spending time with anime more thoughtfully, more closely. It can turn those 23 minutes into more than just something “watched”—perhaps even into a moment shared with its creator.That’s what <strong>WRP</strong> hopes to make possible. And sometimes, that connection goes even deeper.
</p>
  </div>  
</div>
<div class="hairline"></div>
</template>

<!-- ✅ ファイナル週用 note テンプレート -->
<template id="note-final">
  <div class="note">
    <p class="note-title">
      <strong>*Note 1: General disclaimer*</strong>
    </p>
    <p>
      This ranking is absolutely subjective and personal, while striving to remain as objective as possible. There is genuinely no intent to humiliate, belittle, or undermine any creators or their work. The scoring is based on a personal set of criteria, refined over time and shaped by both relative and absolute evaluation. These criteria focus on key elements such as animation, script, structure, direction, pacing, overall appeal, charm, and the degree of satisfaction the work delivers as a complete piece.
    </p>   
  </div>
  
  <div class="note">
   <p class="note-title"><strong>*Note 2: F.WRP (Final Weekly Ranking Point)*</strong></p>

  <p>
    FWRP is a unique metric designed to quantify the cumulative viewing experience over the course of a full cour.<br>  
The calculation incorporates the total WRP (from episode 1 to the final episode), as well as a separately scored evaluation based on six core elements.
  </p>

  <p>
    Formula:
  </p>

  <p>
    <code>Total WRP (episode 1 to the final episode) ÷ Episode Count × 100 × Var(x) + 6 Element Point</code>
  </p>

  <div class="detail-toggle">
    <strong>Details: &#9662;</strong>
  </div>
    <div class="detail-content">

  <summary>About Var(x)</summary>
  <ul class="about-vax">
    <li>The value of a coefficient <strong>Var(x)</strong> varies depending on the total WRP score range, functioning as a multiplier to reflect ranking volatility or consistency.<br>
    In short, <strong>Var(x)</strong> is a coefficient that  adjusts based on score range distribution, functioning as a compensatory factor to balance out ranking skew or inconsistency between titles.</li>
  </ul>
    
  <summary>About the 6-Element Point and its breakdown</summary>
  <ul class="six-element-summary">
    <li><strong>The 6-Element Point</strong> is a score derived from evaluating the following six core aspects — each considered profoundly foundational and intricately influential, not just to every individual viewing but to the evolving, cumulative experience that defines a full-season anime journey:</li>
  </ul>
  <div class="six-element-detail">
    <ul>
      <li><strong>Opening Theme:</strong> Song (1.0 pt max) + Animation (0.5 pt max)</li>
      <li><strong>Ending Theme:</strong> Song (1.0 pt max) + Animation (0.5 pt max</li>
      <li><strong>Voice Acting / Performance:</strong> 0.5 pt max</li>
      <li><strong>Music & Sound Design:</strong> 0.5 pt max </li>
      <li><strong>Consistency / Coherence / Impact:</strong> 1.0 pt max</li>
      <li><strong>Overall Harmony & Value:</strong> 2.0 pt max</li>
    </ul>
  </div>
  <div class="total"><strong>Total: Maximum 7.0 points</strong></div>
  <summary>💭 Why not disclose all item scores?</summary>
  <div class="disclosure-reason">
  <p>This system is the product of personal experience and long-term observation. It serves as a reference—never an absolute. Rather than reduce everything to raw data, it’s designed to help communicate nuance, emotional resonance, and the full texture of the viewing experience.<br>
Therefore, certain scoring details and internal logic are intentionally withheld.
</p>
  </div>
    </div>
  <hr>

  <div class="note-jp">
    <p class="note-title"><strong>※注釈2：F.WRP（ファイナル・ウィークリー・ランキング・ポイント）について</strong></p>

    <p>FWRPは、1クールを通して蓄積された視聴体験をスコア化するための独自指標です。<br>
算出には、シリーズ全体のスコア（WRP）と、6つのコア要素を用いたポイント評価が含まれます。</p>
    
 <p>
   算出式：
  </p>

  <p>
    <code>総WRP（第1話〜最終話）÷ 話数 × 100 × Var(x) ＋ 6要素ポイント</code>
  </p>

  <div class="detail-toggle">
    <strong>詳細：&#9662;</strong>
  </div>
    <div class="detail-content">
      
  <summary>Var(x)について</summary>   
      
  <ul class="about-vax">
    <li>Var(x) は、総合WRPのスコア帯によって変化する係数であり、各スコア帯による偏りや不均衡を調整するためのものです。</li>
  </ul>
    
 <summary>6要素ポイントについてとまたその内訳</summary>     
  <ul class="six-element-summary">    
    <li><strong>6要素ポイント</strong> は、個人が1クールを通してアニメ作品を享受するうえで最も基本的であり、またその満足感に間違いなく大きな影響力を持つであろう以下の6つの観点を評価して算出されます：</li>
      </ul>
  <div class="six-element-detail">  <ul>
        <li><strong>オープニング：</strong> 楽曲 (1.0点満点) + アニメーション (0.5点満点)</li>
  <li><strong>エンディング：</strong> 楽曲 (1.0点満点) + アニメーション (0.5点満点)</li>
  <li><strong>声優・演技：</strong> 0.5点満点</li>
  <li><strong>音楽・サウンドデザイン：</strong> 0.5点満点</li>
  <li><strong>整合性・一貫性・インパクト：</strong> 1.0点満点</li>
  <li><strong>総合的な調和・一体感・作品力：</strong> 2.0点満点</li>
</ul>
    </div>
<div class="total"><strong>合計：最大7.0点</strong></div>
  <summary>💭 なぜ全項目を公開しないのか</summary>
<p>この評価システムは、個人的な視点と長年の経験に基づいて設計されています。<br>
あくまで「指標」であって、「絶対的な真理」ではありません。すべてを数値化することが目的ではなく、感じた魅力や引っかかりを立体的に伝えるためのサポートとして機能しています。<br>
そのため、一部の配点や内部ロジックについてはあえて非公開とさせていただいています。</p>
    
    </div>
    </div>
  </div>
</template>

</div>



<script>
const pathSegments = window.location.pathname.split('/');
const currentWeek = pathSegments[pathSegments.length - 2]; // e.g., "week12"
const season = pathSegments[pathSegments.length - 3];      // e.g., "spring"
const year = pathSegments[pathSegments.length - 4];        // e.g., "2025"
const weekNum = parseInt(currentWeek.replace("week", ""), 10);

window.currentWeek = currentWeek;
window.season = season;
window.year = year;
window.weekNum = weekNum;

// 🔠 頭文字だけ大文字に変換
function capitalizeFirstLetter(str) {
  return str.charAt(0).toUpperCase() + str.slice(1).toLowerCase();
}
const correctedSeason = capitalizeFirstLetter(season);

// 🔄 次シーズン／前シーズン取得ヘルパー
const seasonOrderMap = { "Winter": "Spring", "Spring": "Summer", "Summer": "Fall", "Fall": "Winter" };
const seasonBackMap = { "Winter": "Fall", "Spring": "Winter", "Summer": "Spring", "Fall": "Summer" };

function getNextSeason(year, season) {
  if (season === "Fall") return { year: String(Number(year) + 1), season: "Winter" };
  return { year, season: seasonOrderMap[season] };
}

function getPrevSeason(year, season) {
  if (season === "Winter") return { year: String(Number(year) - 1), season: "Fall" };
  return { year, season: seasonBackMap[season] };
}

const basePath = `/animeb-v1/ranking/${year}/${season}/`;
const prevLink = document.querySelector('.nav-link.left a');
const nextLink = document.querySelector('.nav-link.right a');

// 🔧 初期化（placeholder上書き防止）
prevLink.href = "#";
nextLink.href = "#";

fetch('../../../../weekly-rankings.json')
  .then(response => {
    console.log("🔍 Response status:", response.status);
    return response.json();
  })
  .then(data => {
    const seasonData = data?.[year]?.[correctedSeason];
    const weeksRaw = seasonData?.weeks;

    if (!weeksRaw || !Array.isArray(weeksRaw)) {
      console.log("🚫 No available weeks found for", year, correctedSeason);
      return;
    }

    const availableWeeks = weeksRaw.map(w => w.toLowerCase().replace(/\s+/g, ''));
    const finalWeek = seasonData.final?.toLowerCase().replace(/\s+/g, '');
    const normalizedCurrentWeek = currentWeek.toLowerCase().replace(/\s+/g, '');


    console.log("✅ availableWeeks:", availableWeeks);
    console.log("🏁 finalWeek:", finalWeek);

    const index = availableWeeks.indexOf(normalizedCurrentWeek);
    const prevWeek = index > 0 ? availableWeeks[index - 1] : null;
    const nextWeek = index >= 0 && index < availableWeeks.length - 1 ? availableWeeks[index + 1] : null;

    // ⬅️ 前の週 or 前のシーズン
    if (prevWeek) {
      prevLink.href = `${basePath}${prevWeek}/index.html`;
    } else {
      const prevInfo = getPrevSeason(year, correctedSeason);
      const prevSeasonData = data?.[prevInfo.year]?.[prevInfo.season];
      const prevFinal = prevSeasonData?.final?.toLowerCase().replace(/\s+/g, '');
      if (prevFinal) {
        prevLink.href = `/animeb-v1/ranking/${prevInfo.year}/${prevInfo.season.toLowerCase()}/${prevFinal}/index.html`;
      } else {
        // 🔴 グレーアウト処理ここに貼る！
    prevLink.href = "#";
    prevLink.classList.add("disabled");
    prevLink.setAttribute("title", "Coming soon");
      }
    }

    // ➡️ 次の週 or 次のシーズン
    if (nextWeek) {
      nextLink.href = `${basePath}${nextWeek}/index.html`;
    } else {
      const nextInfo = getNextSeason(year, correctedSeason);
      const nextSeasonData = data?.[nextInfo.year]?.[nextInfo.season];
      const nextStart = nextSeasonData?.weeks?.[0]?.toLowerCase().replace(/\s+/g, '');
      if (nextStart) {
        nextLink.href = `/animeb-v1/ranking/${nextInfo.year}/${nextInfo.season.toLowerCase()}/${nextStart}/index.html`;
      } else {
        // 🔴 グレーアウト処理ここに貼る！
    nextLink.href = "#";
    nextLink.classList.add("disabled");
    nextLink.setAttribute("title", "Coming soon");
      }
    }
  })
  .catch(error => {
    console.error("❌ Error loading available weeks:", error);
  });

  // prev, next linkがdisabledならクリックできないようにする
  prevLink.addEventListener("click", (e) => {
  if (prevLink.classList.contains("disabled")) e.preventDefault();
});
nextLink.addEventListener("click", (e) => {
  if (nextLink.classList.contains("disabled")) e.preventDefault();
});


</script>


<script src="../../../../assets/js/ranking/weekly/main.js"></script>
</body>
</html>

